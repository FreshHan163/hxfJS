<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>ES6--Promise&Async函数</title>
    <script>
        function printText(url) {
            return new Promise((resolve, reject) => {
                console.log('url = ', url);
                resolve();
            });
        }
        function logInOrder(urls) {
            // 远程读取所有url
            const textPromises = urls.map((url, index) => {
                return printText(url).then(res => `第${index}个url = ${url}`);
            });
            textPromises.reduce((chain, textPromise) => {
                return chain.then(() => textPromise)
                    .then(text => console.log(text));
            }, Promise.resolve());
        }
        // async函数
        async function logInOrder(urls) {
            for (const url of urls) {
                const res = await printText(url);
                console.log(await res.text());
            }
        }
        // 并发请求
        async function  logIn(urls) {
            // 并发读取远程url
            const textPromises = urls.map(async url => {
                const res = await printText(url);
                return res;
            });
            for (const textPromise of textPromises) {
                console.log(await textPromises);
            }
        }
        logIn(['study.baidu.com', 'ddd', 'taobao.com']);
    </script>
  </head>
  <body>
    <div class="app">
        按照顺序完成异步操作
    </div>
    <!-- built files will be auto injected -->
  </body>
</html>
